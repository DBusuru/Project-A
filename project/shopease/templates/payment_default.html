{% extends 'emails/base_email.html' %}

{% block content %}
<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
    <div style="background-color: #6c757d; color: white; padding: 20px; text-align: center;">
        <h2>Important Notice - Order Status Update</h2>
    </div>
    
    <div style="padding: 20px; background-color: #fff;">
        <p>Hello {{ order.user.first_name }},</p>
        
        <p>We notice that the installment payments for order #{{ order.id }} have been pending for an extended period.</p>
        
        <div style="background-color: #f8f9fa; padding: 15px; margin: 20px 0;">
            <h3 style="margin-top: 0;">Order Summary:</h3>
            <p>Original Order Total: KES {{ order.total_amount|floatformat:2 }}</p>
            <p>Amount Paid: KES {{ paid_amount|floatformat:2 }}</p>
            <p>Outstanding Balance: KES {{ order.total_amount|subtract:paid_amount|floatformat:2 }}</p>
        </div>
        
        <div style="background-color: #e9ecef; padding: 15px; margin: 20px 0;">
            <h3 style="margin-top: 0;">Alternative Product Offer:</h3>
            <p>Based on the amount you've paid, we're offering you an equivalent product:</p>
            
            <div style="border: 1px solid #dee2e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
                <img src="{{ refund_product.image.url }}" alt="{{ refund_product.name }}" 
                     style="max-width: 200px; display: block; margin: 0 auto;">
                <h4 style="text-align: center; margin: 10px 0;">{{ refund_product.name }}</h4>
                <p style="text-align: center;">Value: KES {{ refund_product.price|floatformat:2 }}</p>
                <p style="text-align: center; color: #6c757d;">
                    {{ refund_product.description|truncatewords:30 }}
                </p>
            </div>
        </div>
        
        <div style="text-align: center; margin: 30px 0;">
            <a href="{{ claim_url }}" style="background-color: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
                Claim Alternative Product
            </a>
        </div>
        
        <div style="background-color: #fff3cd; padding: 15px; margin: 20px 0;">
            <h4 style="margin-top: 0;">Next Steps:</h4>
            <ol style="margin: 10px 0; padding-left: 20px;">
                <li>Review the alternative product offer above</li>
                <li>Click the "Claim Alternative Product" button to proceed</li>
                <li>Confirm your shipping details</li>
                <li>We'll process your new order within 24 hours</li>
            </ol>
        </div>
    </div>
    
    <div style="background-color: #f8f9fa; padding: 20px; text-align: center; font-size: 12px;">
        <p>This offer is valid for the next 30 days.</p>
        <p>If you have any questions, please contact our support team.</p>
    </div>
</div>
{% endblock %}